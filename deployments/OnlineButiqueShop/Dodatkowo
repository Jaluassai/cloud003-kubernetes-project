Ingress â€“ po co i dlaczego lepszy

Ingress to warstwa HTTP/HTTPS nad Service

Schemat:

Internet
  â†“
Ingress Controller (NGINX)
  â†“
Service (ClusterIP)
  â†“
Pod

Co zyskujesz:

âœ… domeny (shop.local)
âœ… HTTPS (TLS)
âœ… routing wielu aplikacji
âœ… jeden punkt wejÅ›cia
âœ… bardzo dobrze wyglÄ…da w pracy inÅ¼ynierskiej ðŸ˜Ž

ðŸ”§ Poprawny Ingress dla Ciebie (waÅ¼na poprawka!)

U Ciebie frontend-external jest LoadBalancer,
dla Ingress lepiej uÅ¼yÄ‡ frontend (ClusterIP).

ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: onlineboutique
spec:
  rules:
  - host: shop.local
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend
            port:
              number: 80

kubectl apply -f ingress.yaml

/etc/hosts
IP_INGRESS_CONTROLLER  shop.local


SprawdÅº:

kubectl get ingress
kubectl describe ingress onlineboutique


i jeszcze:

kubectl scale deployment frontend --replicas=5


albo:
kind: Deployment
metadata:
  name: frontend
spec:
  replicas: 5
